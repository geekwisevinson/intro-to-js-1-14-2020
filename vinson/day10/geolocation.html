<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="coords">

</div>

<script>
    let id = 1;
    const coordsEl = document.querySelector( '.coords');
    function geo_success(position) {
        console.log(position);
        showPreLocation(position);
    }

    function geo_error() {
        alert("Sorry, no position available.");
    }

    const geo_options = {
        enableHighAccuracy: true,
        maximumAge        : 30000,
        timeout           : 27000
    };

    function showPreLocation(position) {
        const pre = document.createElement('pre');
        const coords = {
            longitude: position.coords.longitude,
            latitude: position.coords.latitude,
            altitude: position.coords.altitude,
            accuracy: position.coords.accuracy,
            heading: position.coords.heading,
            speed: position.coords.speed,
            timestamp: position.timestamp,
            id: id,
        };
        id++;
        coordsEl.appendChild(pre);
        pre.innerHTML = JSON.stringify(coords, null, 4);
        console.log(coords);
        if ( id > 2) {
            coordsEl.removeChild(coordsEl.childNodes[0])
        }

    }
    const wpid = navigator.geolocation.watchPosition(geo_success, geo_error, geo_options);
</script>
</body>
</html>
